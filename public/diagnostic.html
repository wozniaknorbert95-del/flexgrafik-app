<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FlexGrafik CSS Diagnostic</title>
  <link rel="stylesheet" href="/assets/index-tlugib-A.css">
  <style>
    body { margin: 20px; font-family: monospace; background: #000; color: #fff; }
    .test-section { margin: 20px 0; padding: 20px; border: 2px solid #333; background: #111; }
    pre { background: #222; padding: 10px; overflow-x: auto; color: #0f0; border-radius: 4px; }
    code { background: #333; padding: 2px 4px; border-radius: 2px; color: #ff0; }
  </style>
</head>
<body>
  <h1>üîç FlexGrafik CSS Diagnostic Page</h1>
  <p>This page tests if the cyberpunk CSS is actually loading and working.</p>

  <div class="test-section">
    <h2>Test 1: CSS Variable Loading</h2>
    <div id="css-vars-test"></div>
    <script>
      const root = getComputedStyle(document.documentElement);
      const primary = root.getPropertyValue('--color-primary').trim();
      const secondary = root.getPropertyValue('--color-secondary').trim();
      const textPrimary = root.getPropertyValue('--text-primary').trim();

      document.getElementById('css-vars-test').innerHTML = `
        <p><strong>CSS Variables:</strong></p>
        <p>--color-primary: <code>${primary || 'NOT FOUND ‚ùå'}</code> (should be #ff0080)</p>
        <p>--color-secondary: <code>${secondary || 'NOT FOUND ‚ùå'}</code> (should be #00ffff)</p>
        <p>--text-primary: <code>${textPrimary || 'NOT FOUND ‚ùå'}</code> (should be #ffffff)</p>
        <p><strong>${primary === '#ff0080' && secondary === '#00ffff' ? '‚úÖ CSS VARIABLES LOADED CORRECTLY' : '‚ùå CSS VARIABLES MISSING'}</strong></p>
      `;
    </script>
  </div>

  <div class="test-section">
    <h2>Test 2: Button Styling</h2>
    <button class="inline-flex items-center justify-center gap-2 font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-pink-600 to-fuchsia-600 text-white font-bold uppercase tracking-wide shadow-[0_0_20px_rgba(255,0,128,0.5)] hover:shadow-[0_0_30px_rgba(255,0,128,0.7)] hover:scale-[1.02] focus:ring-pink-500 h-11 px-4 text-base min-h-[44px]">
      Primary Button Test
    </button>

    <div id="button-test" style="margin-top: 10px;"></div>
    <script>
      setTimeout(() => {
        const btn = document.querySelector('button');
        const styles = getComputedStyle(btn);
        const bg = styles.backgroundImage;
        const boxShadow = styles.boxShadow;
        const hasGradient = bg.includes('linear-gradient') && (bg.includes('rgb(219, 39, 119)') || bg.includes('rgb(255, 0, 128)'));
        const hasGlow = boxShadow.includes('rgba(255, 0, 128') && boxShadow.includes('20px');

        document.getElementById('button-test').innerHTML = `
          <p><strong>Button Computed Styles:</strong></p>
          <pre>Background: ${bg.substring(0, 100)}...</pre>
          <pre>Box Shadow: ${boxShadow}</pre>
          <p><strong>${hasGradient && hasGlow ? '‚úÖ BUTTON STYLING WORKING' : '‚ùå BUTTON STYLING MISSING'}</strong></p>
        `;
      }, 100);
    </script>
  </div>

  <div class="test-section">
    <h2>Test 3: Typography Classes</h2>
    <div class="text-h1" style="margin: 10px 0;">H1 Text Test (should be bold, uppercase)</div>
    <div class="text-neon-cyan" style="margin: 10px 0;">Neon Cyan Text Test (should glow cyan)</div>
    <div class="text-neon-magenta" style="margin: 10px 0;">Neon Magenta Text Test (should glow magenta)</div>

    <div id="typography-test"></div>
    <script>
      setTimeout(() => {
        const h1 = document.querySelector('.text-h1');
        const neonCyan = document.querySelector('.text-neon-cyan');
        const neonMagenta = document.querySelector('.text-neon-magenta');

        const h1Styles = getComputedStyle(h1);
        const cyanStyles = getComputedStyle(neonCyan);
        const magentaStyles = getComputedStyle(neonMagenta);

        const h1Weight = h1Styles.fontWeight;
        const h1Transform = h1Styles.textTransform;
        const cyanColor = cyanStyles.color;
        const cyanShadow = cyanStyles.textShadow;
        const magentaColor = magentaStyles.color;
        const magentaShadow = magentaStyles.textShadow;

        document.getElementById('typography-test').innerHTML = `
          <p><strong>Typography Test Results:</strong></p>
          <p>.text-h1: weight=<code>${h1Weight}</code>, transform=<code>${h1Transform}</code></p>
          <p>.text-neon-cyan: color=<code>${cyanColor}</code>, shadow=<code>${cyanShadow !== 'none' ? 'present' : 'none'}</code></p>
          <p>.text-neon-magenta: color=<code>${magentaColor}</code>, shadow=<code>${magentaShadow !== 'none' ? 'present' : 'none'}</code></p>
          <p><strong>${h1Weight === '700' && cyanShadow !== 'none' && magentaShadow !== 'none' ? '‚úÖ TYPOGRAPHY WORKING' : '‚ùå TYPOGRAPHY MISSING'}</strong></p>
        `;
      }, 100);
    </script>
  </div>

  <div class="test-section">
    <h2>Test 4: Loaded Stylesheets</h2>
    <div id="stylesheet-test"></div>
    <script>
      const sheets = Array.from(document.styleSheets);
      let output = '<ul>';
      sheets.forEach((sheet, i) => {
        try {
          const href = sheet.href || 'inline';
          const rules = sheet.cssRules ? sheet.cssRules.length : 'unknown';
          const isOurCss = href.includes('index-tlugib-A.css');
          output += `<li>Sheet ${i}: <code>${href}</code> - ${rules} rules ${isOurCss ? '‚≠ê OUR CSS' : ''}</li>`;
        } catch (e) {
          output += `<li>Sheet ${i}: CORS blocked or error</li>`;
        }
      });
      output += '</ul>';
      document.getElementById('stylesheet-test').innerHTML = output;
    </script>
  </div>

  <div class="test-section">
    <h2>Test 5: Network Fetch Check</h2>
    <div id="network-test">Loading...</div>
    <script>
      fetch('/assets/index-tlugib-A.css')
        .then(response => {
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          return response.text();
        })
        .then(css => {
          const hasTokens = css.includes('--color-primary:#ff0080') && css.includes('--color-secondary:#00ffff');
          const hasTypography = css.includes('.text-h1{') && css.includes('.text-neon-cyan{');
          const hasCyberpunk = css.includes('.card-glow-magenta{') && css.includes('scanlines');
          const sizeKb = (css.length / 1024).toFixed(1);

          document.getElementById('network-test').innerHTML = `
            <p><strong>Network Test Results:</strong></p>
            <p>CSS file size: ${sizeKb} KB (should be ~18.8)</p>
            <p>Contains design tokens: ${hasTokens ? '‚úÖ YES' : '‚ùå NO'}</p>
            <p>Contains typography: ${hasTypography ? '‚úÖ YES' : '‚ùå NO'}</p>
            <p>Contains cyberpunk: ${hasCyberpunk ? '‚úÖ YES' : '‚ùå NO'}</p>
            <details>
              <summary>üîç First 300 chars of fetched CSS:</summary>
              <pre>${css.substring(0, 300).replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>
            </details>
          `;
        })
        .catch(err => {
          document.getElementById('network-test').innerHTML = `
            <p>‚ùå ERROR LOADING CSS: ${err.message}</p>
            <p>This means the CSS file is not accessible or has wrong URL.</p>
          `;
        });
    </script>
  </div>

  <div class="test-section">
    <h2>Test 6: Browser Cache Test</h2>
    <div id="cache-test"></div>
    <script>
      // Test if browser is serving stale cache
      const testUrl = '/assets/index-tlugib-A.css?' + Date.now(); // Add timestamp to bypass cache

      fetch(testUrl)
        .then(response => response.text())
        .then(css => {
          const freshTokens = css.includes('--color-primary:#ff0080');
          const cachedResponse = css.length < 1000; // Very small response might be error

          document.getElementById('cache-test').innerHTML = `
            <p><strong>Cache Bypass Test:</strong></p>
            <p>Fresh CSS size: ${css.length} bytes</p>
            <p>Fresh tokens present: ${freshTokens ? '‚úÖ YES' : '‚ùå NO'}</p>
            <p><strong>${freshTokens && css.length > 15000 ? '‚úÖ NO CACHE ISSUES' : '‚ùå CACHE SERVING STALE CONTENT'}</strong></p>
          `;
        })
        .catch(err => {
          document.getElementById('cache-test').innerHTML = `<p>‚ùå Cache test failed: ${err.message}</p>`;
        });
    </script>
  </div>

  <div class="test-section" style="background: #220; border-color: #f00;">
    <h2>üéØ FINAL VERDICT</h2>
    <div id="verdict"></div>
    <script>
      setTimeout(() => {
        const root = getComputedStyle(document.documentElement);
        const primary = root.getPropertyValue('--color-primary').trim();
        const secondary = root.getPropertyValue('--color-secondary').trim();

        const cssLoaded = primary === '#ff0080' && secondary === '#00ffff';

        const btn = document.querySelector('button');
        const btnStyles = getComputedStyle(btn);
        const btnWorking = btnStyles.backgroundImage.includes('linear-gradient');

        const neon = document.querySelector('.text-neon-cyan');
        const neonStyles = getComputedStyle(neon);
        const neonWorking = neonStyles.textShadow !== 'none';

        if (cssLoaded && btnWorking && neonWorking) {
          document.getElementById('verdict').innerHTML = `
            <h3 style="color: #0f0;">‚úÖ CSS IS LOADING AND WORKING CORRECTLY</h3>
            <p>The cyberpunk CSS is present and functional.</p>
            <p><strong>CONCLUSION: The issue is NOT with CSS loading.</strong></p>
            <p><strong>NEXT: Check if React components are using the wrong class names or if there's a JavaScript error preventing rendering.</strong></p>
            <p><strong>ACTION: Open main app and check browser console for JavaScript errors.</strong></p>
          `;
        } else {
          document.getElementById('verdict').innerHTML = `
            <h3 style="color: #f00;">‚ùå CSS IS NOT WORKING</h3>
            <p>Missing: ${!cssLoaded ? 'CSS variables' : ''} ${!btnWorking ? 'button styling' : ''} ${!neonWorking ? 'typography effects' : ''}</p>
            <p><strong>CONCLUSION: The CSS file is not loading properly.</strong></p>
            <p><strong>NEXT: Check if Vercel is serving the wrong CSS file or if there's a build issue.</strong></p>
          `;
        }
      }, 1000);
    </script>
  </div>

  <div style="margin-top: 40px; text-align: center; color: #666;">
    <p>üîó <a href="/" style="color: #0ff;">Back to Main App</a></p>
    <p>üïê Generated: ${new Date().toLocaleString()}</p>
  </div>
</body>
</html>